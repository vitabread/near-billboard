{"version":3,"sources":["utils/config.js","utils/near.js","components/Wallet.js","components/utils/Notifications.js","components/billboard/AddPromise.js","assets/img/handshake.jpg","utils/nearbillboard.js","components/billboard/Promise.js","components/utils/Loader.js","components/billboard/Promises.js","components/utils/Cover.js","App.js","reportWebVitals.js","index.js"],"names":["CONTRACT_NAME","process","environment","env","networkId","nodeUrl","contractName","walletUrl","helperUrl","explorerUrl","Error","nearEnv","connect","Object","assign","deps","keyStore","keyStores","BrowserLocalStorageKeyStore","near","window","walletConnection","WalletConnection","accountId","getAccountId","contract","Contract","account","viewMethods","changeMethods","accountBalance","formatNearAmount","getAccountBalance","total","login","requestSignIn","logout","signOut","location","reload","Wallet","address","amount","symbol","destroy","Dropdown","Toggle","variant","align","id","className","Spinner","animation","size","Menu","Item","href","target","Stack","direction","gap","Divider","as","onClick","Notification","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","NotificationSuccess","text","NotificationError","DefaultProps","defaultProps","AddPromise","save","useState","title","setTitle","message","setMessage","to","setTo","depositAmount","setDepositAmount","dueBlockIndex","setDueBlockIndex","show","setShow","handleClose","Button","style","width","class","Modal","onHide","centered","Header","closeButton","Title","Form","Body","FloatingLabel","controlId","label","Control","type","onChange","e","value","placeholder","height","Footer","disabled","GAS","createPromise","promise","uuid4","parseNearAmount","isOverdue","promiseId","releaseDeposit","transferDeposit","rescindPromise","Promise","release","rescind","transfer","from","status","overdued","setOverdued","getIsOverdued","useCallback","console","log","error","badgeClass","statusText","amountBarText","Number","utils","format","buttonClass","rescindButtonClass","transferButtonClass","useEffect","Col","Card","Badge","bg","Text","src","coverImg","alt","objectFit","role","Loader","Promises","promises","setPromises","loading","setLoading","currentBlockIndex","setCurrentBlockIndex","getCurrentBlockIdx","getCurrentBlockIndex","getPromises","addPromise","data","then","resp","toast","Row","xs","sm","lg","map","_promise","Cover","name","background","minHeight","maxWidth","App","balance","setBalance","getBalance","Container","fluid","Nav","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","nearInitPromise","initializeContract","ReactDOM","render","StrictMode","document","getElementById","catch"],"mappings":"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","file":"static/js/main.54929021.chunk.js","sourcesContent":["const CONTRACT_NAME = process.env.CONTRACT_NAME || \"nearbillboard.brandonleong.testnet\"; // line 1\n\nfunction environment(env) {\n  switch (env) {\n    case \"mainnet\": // line 5\n      return {\n        networkId: \"mainnet\",\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n        explorerUrl: \"https://explorer.mainnet.near.org\",\n      };\n    case \"testnet\": // line 14\n      return {\n        networkId: \"testnet\",\n        nodeUrl: \"https://rpc.testnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n        explorerUrl: \"https://explorer.testnet.near.org\",\n      };\n    default:\n      throw Error(`Unknown environment '${env}'.`);\n  }\n}\n\nexport default environment;\n","import environment from \"./config\";\nimport { connect, Contract, keyStores, WalletConnection } from \"near-api-js\";\nimport { formatNearAmount } from \"near-api-js/lib/utils/format\";\n\nconst nearEnv = environment(\"testnet\");\n\nexport async function initializeContract() {\n  const near = await connect(\n    Object.assign(\n      { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },\n      nearEnv\n    )\n  );\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(\n    window.walletConnection.account(),\n    nearEnv.contractName,\n    {\n      viewMethods: [\"getPromise\", \"getPromises\", \"getCurrentBlockIndex\", \"isOverdue\"],\n      changeMethods: [\"createPromise\", \"releaseDeposit\", \"rescindPromise\", \"transferDeposit\"],\n    }\n  );\n}\n\nexport async function accountBalance() {\n  return formatNearAmount(\n    (await window.walletConnection.account().getAccountBalance()).total,\n    2\n  );\n}\n\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}\n","import React from \"react\";\nimport { Dropdown, Stack, Spinner } from \"react-bootstrap\";\n\nconst Wallet = ({ address, amount, symbol, destroy }) => {\n  if (address) {\n    return (\n      <>\n        <Dropdown>\n          <Dropdown.Toggle\n            variant=\"light\"\n            align=\"end\"\n            id=\"dropdown-basic\"\n            className=\"d-flex align-items-center border rounded-pill py-1\"\n          >\n            {amount ? (\n              <>\n                {amount} <span className=\"ms-1\"> {symbol}</span>\n              </>\n            ) : (\n              <Spinner animation=\"border\" size=\"sm\" className=\"opacity-25\" />\n            )}\n          </Dropdown.Toggle>\n\n          <Dropdown.Menu className=\"shadow-lg border-0\">\n            <Dropdown.Item\n              href={`https://explorer.testnet.near.org/accounts/${address}`}\n              target=\"_blank\"\n            >\n              <Stack direction=\"horizontal\" gap={2}>\n                <i className=\"bi bi-person-circle fs-4\" />\n                <span className=\"font-monospace\">{address}</span>\n              </Stack>\n            </Dropdown.Item>\n\n            <Dropdown.Divider />\n            <Dropdown.Item\n              as=\"button\"\n              className=\"d-flex align-items-center\"\n              onClick={() => {\n                destroy();\n              }}\n            >\n              <i className=\"bi bi-box-arrow-right me-2 fs-4\" />\n              Disconnect\n            </Dropdown.Item>\n          </Dropdown.Menu>\n        </Dropdown>\n      </>\n    );\n  }\n\n  return null;\n};\n\nexport default Wallet;\n","import React from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport PropTypes from \"prop-types\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst Notification = () => (\n  <ToastContainer\n    position=\"bottom-center\"\n    autoClose={5000}\n    hideProgressBar\n    newestOnTop\n    closeOnClick\n    rtl={false}\n    pauseOnFocusLoss\n    draggable={false}\n    pauseOnHover\n  />\n);\n\nconst NotificationSuccess = ({ text }) => (\n  <div>\n    <i className=\"bi bi-check-circle-fill text-success mx-2\" />\n    <span className=\"text-secondary mx-1\">{text}</span>\n  </div>\n);\n\nconst NotificationError = ({ text }) => (\n  <div>\n    <i className=\"bi bi-x-circle-fill text-danger mx-2\" />\n    <span className=\"text-secondary mx-1\">{text}</span>\n  </div>\n);\n\nconst Props = {\n  text: PropTypes.string,\n};\n\nconst DefaultProps = {\n  text: \"\",\n};\n\nNotificationSuccess.propTypes = Props;\nNotificationSuccess.defaultProps = DefaultProps;\n\nNotificationError.propTypes = Props;\nNotificationError.defaultProps = DefaultProps;\n\nexport { Notification, NotificationSuccess, NotificationError };\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Modal, Form, FloatingLabel } from \"react-bootstrap\";\n\nconst AddPromise = ({ save }) => {\n\n  const [title, setTitle] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [to, setTo] = useState(\"\");\n  const [depositAmount, setDepositAmount] = useState(0);\n  const [dueBlockIndex, setDueBlockIndex] = useState(\"\");\n  const isFormFilled = () => title && message && to && depositAmount;\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  return (\n    <>\n      <Button\n        onClick={handleShow}\n        variant=\"dark\"\n        className=\"rounded-pill px-0\"\n        style={{ width: \"38px\" }}\n      >\n        <i class=\"bi bi-plus\"></i>\n      </Button>\n      <Modal show={show} onHide={handleClose} centered>\n        <Modal.Header closeButton>\n          <Modal.Title>Promise Information</Modal.Title>\n        </Modal.Header>\n        <Form>\n          <Modal.Body>\n            <FloatingLabel\n              controlId=\"inputTitle\"\n              label=\"Promise Title\"\n              className=\"mb-3\"\n            >\n              <Form.Control\n                type=\"text\"\n                onChange={(e) => {\n                  setTitle(e.target.value);\n                }}\n                placeholder=\"Enter Title of The Promise\"\n              />\n            </FloatingLabel>\n            <FloatingLabel\n              controlId=\"inputMessage\"\n              label=\"Content\"\n              className=\"mb-3\"\n            >\n              <Form.Control\n                as=\"textarea\"\n                placeholder=\"message\"\n                style={{ height: \"80px\" }}\n                onChange={(e) => {\n                  setMessage(e.target.value);\n                }}\n              />\n            </FloatingLabel>\n            <FloatingLabel\n              controlId=\"inputTo\"\n              label=\"To\"\n              className=\"mb-3\"\n            >\n              <Form.Control\n                type=\"text\"\n                placeholder=\"To\"\n                onChange={(e) => {\n                  setTo(e.target.value);\n                }}\n              />\n            </FloatingLabel>\n            <FloatingLabel\n              controlId=\"inputDepositAmount\"\n              label=\"Deposit Amount\"\n              className=\"mb-3\"\n            >\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Deposit Amount\"\n                onChange={(e) => {\n                  setDepositAmount(e.target.value);\n                }}\n              />\n            </FloatingLabel>\n            <FloatingLabel\n              controlId=\"inputDueBlockIndex\"\n              label=\"Due Block Index\"\n              className=\"mb-3\"\n            >\n              <Form.Control\n                type=\"text\"\n                placeholder=\"If Block Index > Due Block Index, then receiver can transfer the deposit to his/her account.\"\n                onChange={(e) => {\n                  setDueBlockIndex(e.target.value);\n                }}\n              />\n            </FloatingLabel>\n          </Modal.Body>\n        </Form>\n        <Modal.Footer>\n          <Button variant=\"outline-secondary\" onClick={handleClose}>\n            Close\n          </Button>\n          <Button\n            variant=\"dark\"\n            disabled={!isFormFilled()}\n            onClick={() => {\n              save({\n                title,\n                message,\n                to,\n                depositAmount,\n                dueBlockIndex,\n              });\n              handleClose();\n            }}\n          >\n            Make a Promise\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nAddPromise.propTypes = {\n  save: PropTypes.func.isRequired,\n};\n\nexport default AddPromise;\n","export default __webpack_public_path__ + \"static/media/handshake.c190260f.jpg\";","import { v4 as uuid4 } from \"uuid\";\nimport { parseNearAmount } from \"near-api-js/lib/utils/format\";\n\nconst GAS = 100000000000000;\n\nexport async function createPromise(promise) {\n  promise.id = uuid4();\n  promise.depositAmount = parseNearAmount(promise.depositAmount + \"\");\n  await window.contract.createPromise({ promise }, GAS, promise.depositAmount);\n}\n\nexport function getCurrentBlockIndex() {\n  return window.contract.getCurrentBlockIndex();\n}\n\nexport function isOverdue({id}) {\n  return window.contract.isOverdue({promiseId: id});\n}\n\nexport function getPromises() {\n  return window.contract.getPromises();\n}\n\nexport function releaseDeposit({id}) {\n  return window.contract.releaseDeposit({promiseId: id}, GAS);\n}\n\nexport function transferDeposit({id}) {\n  return window.contract.transferDeposit({promiseId: id}, GAS);\n}\n\nexport function rescindPromise({id}) {\n  return window.contract.rescindPromise({promiseId: id}, GAS);\n}\n","import React, {useEffect, useState, useCallback} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { utils } from \"near-api-js\";\nimport { Card, Button, Col, Badge, Stack } from \"react-bootstrap\";\nimport coverImg from \"../../assets/img/handshake.jpg\";\nimport {\n  isOverdue\n} from \"../../utils/nearbillboard\";\n\nconst Promise = ({ promise, release, rescind, transfer }) => {\n  const account = window.walletConnection.account();\n\n  const { id, title, message, from, to, depositAmount, status, dueBlockIndex } =\n    promise;\n\n  const [overdued, setOverdued] = useState(false);\n\n  const getIsOverdued = useCallback(async (id) => {\n    try {\n      setOverdued(await isOverdue({id}));\n    } catch (error) {\n      console.log({ error });\n    } finally {\n    }\n  });\n\n  const triggerRelease = () => {\n    release(id);\n  };\n\n  const triggerTransfer = () => {\n    transfer(id);\n  };\n\n  const triggerRescind = () => {\n    rescind(id);\n  };\n\n  let badgeClass = \"\";\n  let statusText = \"\";\n  let amountBarClass = \"alert alert-info\";\n  let amountBarText = \"\";\n\n  if (status === \"rescinded\") {\n    badgeClass = \"secondary\";\n    statusText = \"Rescinded\";\n    amountBarText = \"Refund Amount: \" + Number(utils.format.formatNearAmount(depositAmount))/2 + \" NEAR\";\n    amountBarText += \" / \" + \"Forfeit Amount: \" + Number(utils.format.formatNearAmount(depositAmount))/2 + \" NEAR\";\n    amountBarText += \" / \" + \"Transferred Amount: \" + \"-\" + \" NEAR\";\n  } else if (status === \"created\") {\n    badgeClass = \"success\";\n    statusText = \"New\";\n    amountBarText = \"Refund Amount: \" + \"-\" + \" NEAR\";\n    amountBarText += \" / \" + \"Forfeit Amount: \" + \"-\" + \" NEAR\";\n    amountBarText += \" / \" + \"Transferred Amount: \" + \"-\" + \" NEAR\";\n  } else if (status === \"released\") {\n    badgeClass = \"primary\";\n    statusText = \"Completed\";\n    amountBarText = \"Refund Amount: \" + Number(utils.format.formatNearAmount(depositAmount)) + \" NEAR\";\n    amountBarText += \" / \" + \"Forfeit Amount: \" + \"-\" + \" NEAR\";\n    amountBarText += \" / \" + \"Transferred Amount: \" + \"-\" + \" NEAR\";\n  } else if (status === \"transferred\") {\n    badgeClass = \"warning\";\n    statusText = \"Transferred\";\n    amountBarText = \"Refund Amount: \" + \"-\" + \" NEAR\";\n    amountBarText += \" / \" + \"Forfeit Amount: \" + \"-\" + \" NEAR\";\n    amountBarText += \" / \" + \"Transferred Amount: \" + Number(utils.format.formatNearAmount(depositAmount)) + \" NEAR\";\n  }\n\n  let buttonClass = \"d-none\";\n  if (status === \"created\" && promise.to === account.accountId) {\n    buttonClass = \"w-100 py-3\";\n  }\n\n  let rescindButtonClass = \"d-none\";\n  if (status === \"created\" && promise.from === account.accountId) {\n    rescindButtonClass = \"w-100 py-3\";\n  }\n\n  let transferButtonClass = \"d-none\";\n  if (status === \"created\" && promise.to === account.accountId) {\n    transferButtonClass = \"w-100 py-3\";\n  }\n\n  useEffect(() => {\n    getIsOverdued(id);\n  }, []);\n\n  return (\n    <Col key={id}>\n      <Card className=\" h-100\">\n        <Card.Header>\n          <Stack direction=\"horizontal\" gap={2}>\n            <span className=\"font-monospace text-secondary\">{from}</span>\n            <Badge bg={badgeClass} className=\"ms-auto\">\n              {statusText}\n            </Badge>\n          </Stack>\n        </Card.Header>\n\n        <Card.Body className=\"d-flex  flex-column text-center\">\n          <Card.Text className=\"text-secondary\">\n            <span>to: {to}</span>\n          </Card.Text>\n          <Card.Title>{title}</Card.Title>\n          <div className=\" ratio ratio-4x3\">\n            <img src={coverImg} alt={title} style={{ objectFit: \"cover\" }} />\n          </div>\n          <Card.Text className=\"flex-grow-1 \">{message}</Card.Text>\n          <div class=\"alert alert-primary\" role=\"alert\">\n            Deposit Amount: {utils.format.formatNearAmount(depositAmount)} NEAR\n          </div>\n          <div class={amountBarClass} role=\"alert\">\n            {amountBarText}\n          </div>\n          <div class=\"alert alert-warning\" role=\"alert\">\n            Due Block Index: {dueBlockIndex}\n          </div>\n          <Button\n            variant=\"outline-dark\"\n            onClick={triggerRelease}\n            className={buttonClass}\n          >\n            Release Deposit\n          </Button>\n          <h1 />\n          <Button\n            variant=\"outline-warning\"\n            onClick={triggerTransfer}\n            className={overdued ? transferButtonClass : \"d-none\"}\n          >\n            Transfer Deposit to My Account\n          </Button>\n          <Button\n              variant=\"outline-danger\"\n              onClick={triggerRescind}\n              className={overdued ? \"d-none\" : rescindButtonClass}\n          >\n            Rescind Promise\n          </Button>\n        </Card.Body>\n      </Card>\n    </Col>\n  );\n};\n\nPromise.propTypes = {\n  promise: PropTypes.instanceOf(Object).isRequired,\n  release: PropTypes.func.isRequired,\n  rescind: PropTypes.func.isRequired,\n  transfer: PropTypes.func.isRequired,\n};\n\nexport default Promise;\n","import React from \"react\";\nimport { Spinner } from \"react-bootstrap\";\n\nconst Loader = () => (\n  <div className=\"d-flex justify-content-center\">\n    <Spinner animation=\"border\" role=\"status\" className=\"opacity-25\">\n      <span className=\"visually-hidden\">Loading...</span>\n    </Spinner>\n  </div>\n);\nexport default Loader;\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport { toast } from \"react-toastify\";\nimport AddPromise from \"./AddPromise\";\nimport Promise from \"./Promise\";\nimport Loader from \"../utils/Loader\";\nimport { Row } from \"react-bootstrap\";\nimport { NotificationSuccess, NotificationError } from \"../utils/Notifications\";\nimport {\n  getPromises as getPromiseList,\n  releaseDeposit,\n  transferDeposit,\n  createPromise,\n  rescindPromise,\n  getCurrentBlockIndex\n} from \"../../utils/nearbillboard\";\n\nconst Promises = () => {\n  const [promises, setPromises] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [currentBlockIndex, setCurrentBlockIndex] = useState(0);\n\n  const getCurrentBlockIdx = useCallback(async () => {\n    try {\n      setCurrentBlockIndex(await getCurrentBlockIndex());\n    } catch (error) {\n      console.log({ error });\n    } finally {\n    }\n  });\n\n  const getPromises = useCallback(async () => {\n    try {\n      setLoading(true);\n      setPromises(await getPromiseList());\n    } catch (error) {\n      console.log({ error });\n    } finally {\n      setLoading(false);\n    }\n  });\n\n  const addPromise = async (data) => {\n  try {\n    setLoading(true);\n    await createPromise(data).then((resp) => {\n      getPromises();\n    });\n    toast(<NotificationSuccess text=\"Promise added successfully.\" />);\n  } catch (error) {\n    console.log({ error });\n    toast(<NotificationError text=\"Failed to create a promise.\" />);\n  } finally {\n    setLoading(false);\n  }\n};\n\nconst release = async (id) => {\n  try {\n    await releaseDeposit({\n      id\n    }).then((resp) => getPromises());\n    toast(<NotificationSuccess text=\"Release deposit successfully.\" />);\n  } catch (error) {\n    toast(<NotificationError text=\"Failed to release deposit.\" />);\n  } finally {\n    setLoading(false);\n  }\n};\n\nconst transfer = async (id) => {\n  try {\n    await transferDeposit({\n      id\n    }).then((resp) => getPromises());\n    toast(<NotificationSuccess text=\"Transfer deposit successfully.\" />);\n  } catch (error) {\n    toast(<NotificationError text=\"Failed to transfer deposit.\" />);\n  } finally {\n    setLoading(false);\n  }\n};\n\nconst rescind = async (id) => {\n  try {\n    await rescindPromise({\n      id\n    }).then((resp) => getPromises());\n    toast(<NotificationSuccess text=\"Rescind promise successfully.\" />);\n  } catch (error) {\n    toast(<NotificationError text=\"Failed to rescind promise.\" />);\n  } finally {\n    setLoading(false);\n  }\n};\n\nuseEffect(() => {\n  getCurrentBlockIdx();\n}, []);\n\nuseEffect(() => {\n  getPromises();\n}, []);\n\nreturn (\n  <>\n    {!loading ? (\n      <>\n        <div className=\"d-flex justify-content-between align-items-center mb-4\">\n          <h1 className=\"fs-4 fw-bold mb-0\">Near Billboard - Make Promises with Smart Contract / Block Index: {currentBlockIndex}</h1>\n          <AddPromise save={addPromise} />\n        </div>\n        <Row xs={1} sm={2} lg={3} className=\"g-3  mb-5 g-xl-4 g-xxl-5\">\n          {promises.map((_promise) => (\n            <Promise\n              promise={{\n                ..._promise,\n              }}\n              release={release}\n              transfer={transfer}\n              rescind={rescind}\n            />\n          ))}\n        </Row>\n      </>\n    ) : (\n      <Loader />\n    )}\n  </>\n);\n};\n\nexport default Promises;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"react-bootstrap\";\n\nconst Cover = ({ name, login, coverImg }) => {\n  if ((name, login, coverImg)) {\n    return (\n      <div\n        className=\"d-flex justify-content-center flex-column text-center \"\n        style={{ background: \"#000\", minHeight: \"100vh\" }}\n      >\n        <div className=\"mt-auto text-light mb-5\">\n          <div\n            className=\" ratio ratio-1x1 mx-auto mb-2\"\n            style={{ maxWidth: \"320px\" }}\n          >\n            <img src={coverImg} alt=\"\" />\n          </div>\n          <h1>{name}</h1>\n          <p>Please connect your wallet to continue.</p>\n          <Button\n            onClick={login}\n            variant=\"outline-light\"\n            className=\"rounded-pill px-3 mt-3\"\n          >\n            Connect Wallet\n          </Button>\n        </div>\n        <p className=\"mt-auto text-secondary\">Powered by NEAR</p>\n      </div>\n    );\n  }\n  return null;\n};\n\nCover.propTypes = {\n  name: PropTypes.string,\n};\n\nCover.defaultProps = {\n  name: \"\",\n};\n\nexport default Cover;\n","import React, { useEffect, useCallback, useState } from \"react\";\nimport { Container, Nav } from \"react-bootstrap\";\nimport { login, logout as destroy, accountBalance } from \"./utils/near\";\nimport Wallet from \"./components/Wallet\";\nimport { Notification } from \"./components/utils/Notifications\";\nimport Promises from \"./components/billboard/Promises\";\nimport Cover from \"./components/utils/Cover\";\nimport coverImg from \"./assets/img/handshake.jpg\";\nimport \"./App.css\";\n\nconst App = function AppWrapper() {\n  const account = window.walletConnection.account();\n  const [balance, setBalance] = useState(\"0\");\n  const getBalance = useCallback(async () => {\n    if (account.accountId) {\n      setBalance(await accountBalance());\n    }\n  });\n\n  useEffect(() => {\n    getBalance();\n  }, [getBalance]);\n\n  return (\n    <>\n      <Notification />\n      {account.accountId ? (\n        <Container fluid=\"md\">\n          <Nav className=\"justify-content-end pt-3 pb-5\">\n            <Nav.Item>\n              <Wallet\n                address={account.accountId}\n                amount={balance}\n                symbol=\"NEAR\"\n                destroy={destroy}\n              />\n            </Nav.Item>\n          </Nav>\n          <main>{ <Promises /> }</main>\n        </Container>\n      ) : (\n        <Cover name=\"Near Billboard - Make Promises with Smart Contract\" login={login} coverImg={coverImg} />\n      )}\n    </>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { initializeContract } from \"./utils/near\";\n\nimport \"bootstrap\";\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nwindow.nearInitPromise = initializeContract()\n  .then(() => {\n    ReactDOM.render(\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>,\n      document.getElementById(\"root\")\n    );\n  })\n  .catch(console.error);\n\nreportWebVitals();\n"],"sourceRoot":""}